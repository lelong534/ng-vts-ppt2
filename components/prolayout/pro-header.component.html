<div class="logo-header vts-logo" *ngIf="showLogo" [style.backgroundImage]="'url(' + vtsLogoUrl + ')'"></div>
<div vts-row class="header-main">
    <div vts-col vts-row [vtsAlign]="'middle'" *ngIf="showLogo && !isFixedHeader">
        <button vts-button vtsType="primary" class="trigger" (click)="toggleSider()">
            <i vts-icon [vtsType]="'NotesDoutone-1'"></i>
        </button>
    </div>
    <!-- Title with menu -->
    <div vts-col class="title-container" vtsFlex="auto">
        <ng-container *ngIf="vtsTitle">
            <ng-container *ngIf="windowSize == 'medium'; else shortTitle">
                {{ vtsTitle }}
            </ng-container>            
            <ng-template #shortTitle>
                <!-- a short title can be here, not decided -->
                {{ vtsTitle }}
            </ng-template>
        </ng-container>
        <ng-container *ngIf="!useSplitMenu">
            <ul vts-menu vtsTheme="dark" vtsMode="horizontal" class="header-menu">
                <ng-container *ngFor="let item of menuData">
                    <vts-prolayout-menu-item-horizontal [vtsMenuItem]="item"></vts-prolayout-menu-item-horizontal>
                </ng-container>
            </ul>
        </ng-container>
    </div>
    <div vts-col vts-row class="avatar-container" [vtsGutter]="20">
        <!-- Search -->
        <div vts-col vts-row [vtsAlign]="'middle'" class="icons-utils">
            <i vts-icon vtsType="Search" class="cursor-pointer" style="color: white;"></i>
        </div>
        <!-- Full screen -->
        <div vts-col vts-row [vtsAlign]="'middle'" class="icons-utils">
            <i vts-icon vtsType="FullScreen:vts" class="cursor-pointer" style="color: white;" (click)="toggleFullScreen()"></i>
        </div>
        <!-- Block UI -->
        <div vts-col vts-row [vtsAlign]="'middle'" class="icons-utils">
            <i vts-icon vtsType="Lock:vts" class="cursor-pointer" style="color: white;" (click)="lockScreen()"></i>
        </div>
        <!-- Notification -->
        <div vts-col vts-row [vtsAlign]="'middle'" class="icons-utils">
            <i vts-icon vtsType="Notifications:vts" class="cursor-pointer" style="color: white;" *ngIf="notificationCount === 0; else hasNotification"></i>
            <ng-template #hasNotification>
                <!-- render notification pane based on type, default to be a menu context -->
                <ng-container [ngSwitch]="vtsNotificationConfig.type">
                    <ng-container *ngSwitchCase="'drawer'">
                        <vts-badge [vtsCount]="notificationCount" [vtsOverflowCount]="vtsNotificationConfig.overflowCount">
                            <i vts-icon vtsType="Notifications:vts" class="cursor-pointer" style="color: white;" (click)="openNotificationPane()"></i>
                        </vts-badge>
                    </ng-container>
                    <ng-container *ngSwitchDefault>
                        <!-- if has vtsMenuTemplate -->
                        <vts-badge [vtsCount]="notificationCount" [vtsOverflowCount]="vtsNotificationConfig.overflowCount" *ngIf="vtsMenuTemplate">
                            <i vts-icon vtsType="Notifications:vts" vts-dropdown vtsTrigger="click" [vtsDropdownMenu]="defaultMenu" class="cursor-pointer" style="color: white;"></i>
                            <vts-dropdown-menu #defaultMenu="vtsDropdownMenu">
                                <ng-container *ngTemplateOutlet="vtsMenuTemplate">       
                                    {{vtsMenuTemplate}}     
                                </ng-container>
                            </vts-dropdown-menu>
                        </vts-badge>
                    </ng-container>
                </ng-container>
            </ng-template>
        </div>
        <!-- avatar with menu dropdown -->
        <div vts-row vtsAlign="middle" vts-col class="cursor-pointer" vts-dropdown [vtsDropdownMenu]="menuAvatar" *ngIf="vtsAvatarMenu.length > 0; else withoutDropdown">
            <vts-avatar vts-col vtsSize="sm" vtsIcon="user" [vtsSrc]="vtsAvatar.imgUrl"></vts-avatar>
            <div vts-col style="margin-left: 5px;" *ngIf="windowSize == 'large'">
                <div class="username">
                    {{ vtsAvatar.name }}
                </div>
                <div class="subname">
                    {{ vtsAvatar.subname }}
                </div>
            </div>
        </div>
        <!-- avatar without menu dropdown -->
        <ng-template #withoutDropdown>
            <div vts-row vtsAlign="middle" vts-col class="cursor-pointer" vts-dropdown [vtsDropdownMenu]="menuAvatar">
                <vts-avatar vts-col vtsSize="sm" vtsIcon="user" [vtsSrc]="vtsAvatar.imgUrl"></vts-avatar>
                <div vts-col style="margin-left: 5px;" *ngIf="windowSize == 'large'">
                    <div class="username">
                        {{ vtsAvatar.name }}
                    </div>
                    <div class="subname">
                        {{ vtsAvatar.subname }}
                    </div>
                </div>
            </div>
        </ng-template>
    </div>
    <vts-dropdown-menu #menuAvatar="vtsDropdownMenu">
        <ul vts-menu vtsSelectable>
            <li vts-menu-item *ngFor="let item of vtsAvatarMenu" (click)="onClickAvatarMenuItem(item)">{{ item.label }}</li>
        </ul>
    </vts-dropdown-menu>
</div>
